Lesson 7: CALCULATE + FILTER + Context Transition

Now your example:
â“ Test = CALCULATE(SUM(Sales[Amount]))

If you put this inside a visual, or evaluate the measure normally:

âž¤ What is the result?
It returns exactly the same value as:
Total Sales = SUM(Sales[Amount])
Why?
Because in a measure, there is NO row context, only filter context.
So CALCULATE() has no row context to convert â†’ no context transition happens â†’ it behaves normally.
BT â€” If you use this inside a CALCULATED COLUMN:
Example:
Test = CALCULATE( SUM(Sales[Amount]) )
Imagine this table:
Product	Amount
A	100
A	200
B	300
For row 1 (Product A, Amount 100)

Row context = A
CALCULATE applies context transition â†’ Converts this row into filters:

Product = A
Amount = 100


Then this is executed:

SUM(Sales[Amount]) WHERE Product='A'


So instead of returning 100, it returns:

100 + 200 = 300

Each row A will return 300.
Each row B will return 300.

So your column will be:

Product	Amount	Test
A	100	300
A	200	300
B	300	300
â­ KEY RULE

CALCULATE in a measure = NO context transition.
CALCULATE in a calculated column = YES context transition.

ðŸ“Œ Why this happens?

Because:

Measures have filter context only

Calculated columns have row context

CALCULATE = â€œconvert row context â†’ filter contextâ€

This is the engine of DAX.
When you use CALCULATE inside a Row Context, DAX automatically converts that row context into a filter context.


1. A 650
B 200
C 150

2. sales_by_customer = calculate(sum[sales[amount]))

3. Total Sales for Orders Above Quantity 10
calculate(sum(sales[amount]), filter(sales, sales[qty] > 10))

4. Sales of a Selected Product Only
calculate(sum(sales[amount]), filter


