LESSON 5: FILTER, ALL, ALLEXCEPT, VALUES â€” The Most Powerful DAX Functions

ðŸ”¶ 1. FILTER() â€” apply a row-by-row condition on a table
âœ” Syntax
FILTER( TableName, Condition )

âœ” Example

Sales where Quantity > 5:

CALCULATE(
    SUM(Sales[Amount]),
    FILTER(Sales, Sales[Qty] > 5)
)

â­ Key idea:

FILTER creates row context, then CALCULATE turns it into filter context.

This is how you write ALL complex logic.

ðŸ”· 2. ALL() â€” remove filters from a table or column

This is essential for:

percentage of total

showing totals in visuals

removing slicer and visual filters

âœ” Remove all filters from Sales table:
ALL(Sales)

âœ” Remove only Product filter:
ALL(Sales[Product])

â— Important:

ALL(Sales) removes every filter
ALL(Sales[Product]) removes only product filter

ðŸ“Œ Example: Percentage of Total Sales (classic interview question)
% of Total Sales =
DIVIDE(
    [Total Sales],
    CALCULATE( [Total Sales], ALL(Sales) )
)

ðŸ”¶ 3. ALLEXCEPT() â€” remove all filters EXCEPT those you want to keep
âœ” Syntax
ALLEXCEPT( Table, Column1, Column2 )

What it does:

Removes all filters EXCEPT specific columns.

ðŸ“Œ Example: Keep Product but ignore all other filters:
Sales_Within_Product =
CALCULATE(
    [Total Sales],
    ALLEXCEPT( Sales, Sales[Product] )
)

ðŸ‘‰ When useful?

Running totals by product

Percent of product total

Product-level normalization

Category-level comparisons

ðŸ”· 4. VALUES() â€” returns the distinct value(s) in current filter context
âœ” Syntax
VALUES(Column)


If the filter context = one product
â†’ it returns a single value.
If multiple products selected
â†’ it returns a table of values.

ðŸ“Œ Example: Get selected Productâ€™s category
Selected_Category =
CALCULATE(
    SELECTEDVALUE( Product[Category] ),
    VALUES(Product[Category])
)


(But SELECTEDVALUE is usually simpler)

ðŸ“Œ Example: Dynamic measure comparison

Compare selected product sales to all other products:

Product_vs_All =
[Total Sales] -
CALCULATE( [Total Sales], ALL(Product) )

â­ Summary (Simple Memory Chart)
Function	What It Does
FILTER	- Applies row-by-row condition inside CALCULATE
ALL	- Removes filters (selected columns or whole table)
ALLEXCEPT - Removes all filters except the ones you keep
VALUES - Gets distinct values in the current filter

1. Percentage of Sales within its Category
newmeasure = divide(sum(sales[amount]), calculate(sum(sales[amount]), allexcept(sales, sales[product])))

2. Sales ignoring only Region filters
newmeasure = calculate(sum(sales[amount]), all(sales[region])
(Hint: ALL with column)

3. Sales for products that are above average sales
newmeasure = calculate(sum(sales[amount]), filter(all(sales), sales, sales[amount] > avg(sales[amount]]))
(Hint: FILTER + AVERAGE)
explanation 
Important Points

We use ALL(Sales) inside FILTER
Because if we filter only the current context, average will break.

Sales[Amount] > AVERAGE(Sales[Amount])
Compares each product's sale with the overall average amount.
