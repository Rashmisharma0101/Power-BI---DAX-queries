LESSON 6: Time Intelligence ‚Äî Part 1
(DATEADD, SAMEPERIODLASTYEAR, PREVIOUSMONTH, LASTN Periods)

DATEADD(-3 MONTH) ‚Üí only the month exactly 3 months back (e.g., April ‚Üí January)

DATESINPERIOD(-3 MONTH) ‚Üí last 3 months window combined (e.g., Apr+Mar+Feb)

Rolling_3_Months =
CALCULATE(
    [Total Sales],
    DATESINPERIOD(
        'Date'[Date],
        MAX('Date'[Date]),   -- current date context (April)
        -3,
        MONTH
    )
)

üü¶ 1. DATEADD ‚Äî The Core of Time Intelligence

DATEADD shifts dates forward/backward in a date column.

Syntax:
DATEADD(Date[Date], -1, YEAR)
DATEADD(Date[Date], -1, MONTH)
DATEADD(Date[Date], -3, MONTH)
DATEADD(Date[Date], -1, QUARTER)

üü© 2. Sales Last Year (YoY)
Sales_Last_Year =
CALCULATE(
    [Total Sales],
    DATEADD('Date'[Date], -1, YEAR)
)

Explanation:

DATEADD shifts the entire date context 1 year back

CALCULATE returns sales for shifted dates

üüß 3. Sales for Previous Month
Sales_Previous_Month =
CALCULATE(
    [Total Sales],
    DATEADD('Date'[Date], -1, MONTH)
)

Example:

If the current context is March 2024
DATEADD ‚Üí shifts to February 2024

üü™ 4. Sales for Last 3 Months (Rolling 3 Months)
Sales_Last_3_Months =
CALCULATE(
    [Total Sales],
    DATEADD('Date'[Date], -3, MONTH)
)


Important:
This shifts the window back 3 months, not sum of 3 individual months (that is rolling).

If you want rolling 3 months (current + last 2 months):

Rolling_3_Months =
CALCULATE(
    [Total Sales],
    DATESINPERIOD('Date'[Date], MAX('Date'[Date]), -3, MONTH)
)

üü• 5. Sales for Previous Quarter
Sales_Previous_Quarter =
CALCULATE(
    [Total Sales],
    DATEADD('Date'[Date], -1, QUARTER)
)

üü® 6. Sales for Current Year but Excluding Current Month

Very common interview question.

Sales_YTD_Excluding_Current_Month =
CALCULATE(
    [Total Sales],
    FILTER(
        ALL('Date'),
        'Date'[Year] = YEAR(TODAY())
            && 'Date'[Month] < MONTH(TODAY())
    )
)

What this does:

ALL('Date') ‚Üí remove all date filters

Filter only dates:

year = current year

month < current month

üü´ 7. SAMEPERIODLASTYEAR (Alternative YoY)
Sales_LY =
CALCULATE(
    [Total Sales],
    SAMEPERIODLASTYEAR('Date'[Date])
)


Same output as DATEADD(-1 YEAR).

üü© 8. PREVIOUSMONTH Shortcut
Sales_PM =
CALCULATE(
    [Total Sales],
    PREVIOUSMONTH('Date'[Date])
)

‚≠ê At This Stage You Should Know:

‚úî DATEADD shifts dates
‚úî PREVIOUSMONTH, SAMEPERIODLASTYEAR are shortcuts
‚úî DATESINPERIOD creates rolling windows
‚úî FILTER+ALL can create custom time intelligence

Practice questions:
1. Sales for the same month last year.
measure = calculate(sum(sales[amount]),dateadd(datetable[date] , -1, year))

2. Sales for the immediately previous month.
measure = calculate(sum(sales[amount]), dateadd(datetable[date], -1, month))

3. Sales for the quarter immediately before the current quarter.
measure = calculate(sum(sales[amount]), dateadd(datetable[date], -1, quarter))

4. Sales Last 3 Months
measure = calculate(sum(sales[amount]), DATESINPERIOD(datetable[Date], MAX(datetable[Date]), -3, MONTH))

5. Rolling 6 Months Sales
measure = calculate(sum(sales[amount]), datesinperiod(datetable[date], max(datetable[date]), -6, month))

6. Sales from Jan 1 of the current year up to today
Sales_YTD = totalytd(sum(sales[amount]), datetable[date])

7. YTD Sales but remove current month‚Äôs sales.
Sales_YTD_Excluding_Current_Month =
CALCULATE(
    [Sales_YTD],
    FILTER(
        ALL(DateTable),
        DateTable[Year] = YEAR(TODAY()) &&
        DateTable[MonthNumber] < MONTH(TODAY())
    )
)

8. Difference = Sales This Quarter ‚Äì Sales Previous Quarter
tq = calculate(sum(sales[amount]), DATESQtd(datetable[Date])
pq = calculate(sum(sales[amount]), dateadd(datetable[Date], -1, quarter))
measure  = [tq] - [pq]

9. % Growth from Last Year
ty = calculate(sum(sales[amount]))
ly = calculate(sum(sales[amount]), dateadd(datetable[date] , -1, year))
measure = divide([ty] - [ly], [ly])

10. Compute number of active customers in last 90 days.
calculate(distinctcount(sales[customer_id]), datesinperiod(datetable[date], max(datetable[date], -90, day)))

‚úÖ What DAX actually does

DAX only applies filters that come from the visual.

If your table visual shows:

Year	Total Sales
2083	‚Ä¶
2084	‚Ä¶
2085	‚Ä¶

Then for each row, Power BI automatically applies:

For the 2083 row ‚Üí Year = 2083

For the 2084 row ‚Üí Year = 2084

For the 2085 row ‚Üí Year = 2085

üëâ This filter comes from the row of the visual, NOT from ‚Äútoday‚Äôs date.‚Äù

‚ùå What DAX does NOT do

DAX does NOT think:

"Hmm‚Ä¶ calendar year is 2085. Let me automatically filter to 2085."

No, it never does that.

It only follows what the visual (or slicer) tells it.

‚≠ê Let me break it down clearly
Case 1 ‚Üí You place Year on rows of a table visual

DAX applies filters automatically for each row:

Row ‚Äú2083‚Äù ‚Üí filter context = Year 2083

Row ‚Äú2084‚Äù ‚Üí filter context = Year 2084

Row ‚Äú2085‚Äù ‚Üí filter context = Year 2085

So [Total Sales] becomes:

SUM of sales where Year = <row value>


That‚Äôs why you don‚Äôt need to manually filter ‚Äú[Sales_TY]‚Äù.

Case 2 ‚Üí Your visual has NO year, just showing a card:

Card ‚Üí Total Sales

This card has no Year filter, so [Total Sales] returns sum of the entire table.

DAX will NOT guess the latest year.

üî• So when does [Sales_TY] work correctly?

Sales_TY = [Total Sales]

works only when the visual already filters a specific time period.

Example:

You put Year on a matrix:

Year	Sales TY
2083	120,000
2084	140,000
2085	160,000

Each row gives [Sales_TY] the filter for that year.

You didn't write the filter ‚Äî
the visual applied it.

‚úîÔ∏è Easy Thumb Rule
DAX never decides the year.
The visual decides the year.
DAX only answers inside the filter context given by the visual.
