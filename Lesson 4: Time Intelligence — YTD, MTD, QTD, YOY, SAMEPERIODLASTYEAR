Lesson 4: Time Intelligence ‚Äî YTD, MTD, QTD, YOY, SAMEPERIODLASTYEAR

‚úÖ Step 1 ‚Äî Create a Date Table Using DAX

Go to:

Modeling ‚Üí New Table

Paste this DAX:

DateTable =
ADDCOLUMNS (
    CALENDAR ( DATE(2018,1,1), DATE(2030,12,31) ),
    "Year", YEAR ( [Date] ),
    "MonthNumber", MONTH ( [Date] ),
    "Month", FORMAT ( [Date], "MMM" ),
    "Quarter", "Q" & FORMAT ( [Date], "Q" ),
    "YearMonth", FORMAT ( [Date], "YYYY-MM" )
)

What this gives you:

Full date range

Year

Month

Month name

Quarter

Year-Month (for sorting visuals)

‚ö†Ô∏è Very important: Mark this as Date Table

Go to:

Table Tools ‚Üí Mark as Date Table ‚Üí Choose [Date] column

This step is CRITICAL.
Time intelligence will not work otherwise.

‚≠ê Step 2 ‚Äî Create a Relationship

Connect:

DateTable[Date] ‚Üí Sales[Date]

Relationship type:

Single direction (Date ‚Üí Sales)

1 to Many

üéâ Now you're ready for TIME INTELLIGENCE
‚≠ê LESSON 4 ‚Äî PART 2: YTD, QTD, MTD, YOY

Assume you already have:

Total Sales = SUM(Sales[Amount])

‚úî 1. Year-to-Date (YTD)
Sales YTD =
TOTALYTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 2. Month-to-Date (MTD)
Sales MTD =
TOTALMTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 3. Quarter-to-Date (QTD)
Sales QTD =
TOTALQTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 4. Year-over-Year (YOY) Growth
Step 1 ‚Äî get last year sales:
Sales LY =
CALCULATE(
    [Total Sales],
    SAMEPERIODLASTYEAR( DateTable[Date] )
)

Step 2 ‚Äî growth amount:
YOY Growth =
[Total Sales] - [Sales LY]

Step 3 ‚Äî growth percentage:
YOY Growth % =
DIVIDE( [YOY Growth], [Sales LY] )


LESSON 4 ‚Äî PART 2: YTD, QTD, MTD, YOY

Assume you already have:

Total Sales = SUM(Sales[Amount])

‚úî 1. Year-to-Date (YTD)
Sales YTD =
TOTALYTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 2. Month-to-Date (MTD)
Sales MTD =
TOTALMTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 3. Quarter-to-Date (QTD)
Sales QTD =
TOTALQTD(
    [Total Sales],
    DateTable[Date]
)

‚úî 4. Year-over-Year (YOY) Growth
Step 1 ‚Äî get last year sales:
Sales LY =
CALCULATE(
    [Total Sales],
    SAMEPERIODLASTYEAR( DateTable[Date] )
)

Step 2 ‚Äî growth amount:
YOY Growth =
[Total Sales] - [Sales LY]

Step 3 ‚Äî growth percentage:
YOY Growth % =
DIVIDE( [YOY Growth], [Sales LY] )

üìå Mini Exercise (Time Intelligence)

Write DAX for:

1. Sales for last 3 months
total_sales  = sum(sales[amount])
sales_last_3_months = Calculate([total_sales], Dateadd(datetable[Date], -3, month ))

Explanation:

DATEADD(..., -3, MONTH) shifts the current date context back by 3 months.
So if user selects June 2024, it returns sales for:
March
April
May


2. Sales for previous quarter
sales_prev_quarter = calculate([total_sales], dateadd(datetable[date], -1, quarter))

3. Sales for current year but excluding current month
sales = sum(sales[amount], filter(all(Datetable), datetable(year) = year(today()) &&
datetable[MonthNumber] < Month(Today())
)
)
